{% extends 'base.html.twig' %}

{% block title %}Ajouter des plats au menu {{ menu.name }}{% endblock %}

{% block body %}
    <div class="min-h-screen bg-amber-50 py-12 px-6 flex items-center justify-center">
        <div class="w-full max-w-4xl bg-white p-10 rounded-xl shadow-lg border border-amber-300">
            <h1 class="text-3xl font-bold text-amber-700 mb-8">Ajouter des plats au menu <span class="text-amber-900">"{{ menu.name }}"</span></h1>

            {{ form_start(form) }}

            <div class="max-h-96 overflow-y-auto border border-amber-200 rounded-md p-4 bg-amber-50 space-y-6">
                <div class="max-h-96 overflow-y-auto border border-amber-200 rounded-md p-4 bg-amber-50 space-y-6">
                    {% for category in menu.categories %}
                        <div>
                            <h2>{{ category.name }}</h2>
                            {% for item in category.menuItems %}
                                {% set isChecked = false %}
                                {% for choice in form.menuItems %}
                                    {% if choice.vars.value == item.id and choice.vars.checked %}
                                        {% set isChecked = true %}
                                    {% endif %}
                                {% endfor %}
                                <label>
                                    <input
                                        type="checkbox"
                                        name="{{ form.menuItems.vars.full_name }}[]"
                                        value="{{ item.id }}"
                                        {% if isChecked %} checked {% endif %}
                                    >
                                    {{ item.name }}
                                </label>
                            {% else %}
                                <p>Aucun plat dans cette cat√©gorie.</p>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>



            </div>

            <button type="submit" class="mt-6 w-full bg-amber-600 hover:bg-amber-700 text-white py-3 rounded-md font-semibold">
                Valider
            </button>

            {{ form_end(form) }}

        </div>
    </div>
{% endblock %}
